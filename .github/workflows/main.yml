name: EMS CI with Maven
 
on:
 push:
   branches: [ development ]
 pull_request:
   branches: [ development ]
 workflow_dispatch:
 
jobs:
 build:
   runs-on: ubuntu-latest
   steps:
   - uses: actions/checkout@v2
   - name: Set up JDK 11
     uses: actions/setup-java@v1
     with:
       java-version: 11
   - name: Build with Maven
     run: mvn -B package --file pom.xml
   - name: Analyze with SonarCloud
     run: ./mvnw -B verify sonar:sonar -Dsonar.projectKey=anshul-031_EMSBackend -Dsonar.organization=ems -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_TOKEN
     env:
       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
